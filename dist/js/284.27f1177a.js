"use strict";(self["webpackChunkscholarhub"]=self["webpackChunkscholarhub"]||[]).push([[284],{5284:function(e,t,i){i.r(t),i.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"navi"},[t("NaviBar")],1),t("div",{staticClass:"phpContainer"},[t("div",{staticClass:"Info"},[t("el-upload",{staticClass:"avatar_upload",attrs:{action:"#","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"http-request":e.uploadPic}},[t("img",{staticClass:"image-container",attrs:{id:"Photo",src:this.imageUrl,alt:"头像",width:"170px",height:"170px"}}),t("div",{staticClass:"image-black-cover"},[t("i",{staticClass:"el-icon-plus"})])]),t("div",{staticClass:"PersonalInfo"},[t("p",{staticStyle:{"font-size":"20px",color:"black","font-weight":"bold"}},[e._v(" 姓名："+e._s(e.name)+" "),t("span",[t("i",{directives:[{name:"show",rawName:"v-show",value:e.isSelf,expression:"isSelf"}],staticClass:"el-icon-edit",on:{click:e.modify}},[e._v("详细资料")]),t("el-dialog",{staticClass:"info_dialog",attrs:{visible:e.infoDialog,"append-to-body":!0},on:{"update:visible":function(t){e.infoDialog=t}}},[t("el-descriptions",{attrs:{column:1,"label-style":{"font-size":"20px"}}},[e.infoDialogTitle?t("span",{staticStyle:{"font-size":"25px"},attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-postcard"}),e._v(" 资料 ")]):t("span",{staticStyle:{"font-size":"25px"},attrs:{slot:"title"},slot:"title"},[t("i",{staticClass:"el-icon-edit-outline"}),e._v(" 编辑资料 ")]),e.infoDialogTitle?t("template",{slot:"extra"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.modify_info}},[e._v("编辑")])],1):t("template",{slot:"extra"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.modify_confirm()}}},[e._v("确认")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.modify_cancel}},[e._v("取消")]),t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.modify_clear}},[e._v("清空")])],1),t("el-descriptions-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{placeholder:"请输入用户名",disabled:e.inputDisabled},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("el-descriptions-item",{attrs:{label:"真实姓名"}},[t("el-input",{attrs:{placeholder:"请输入真实姓名",disabled:e.inputDisabled},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("el-descriptions-item",{attrs:{label:"机构"}},[t("el-input",{attrs:{placeholder:"请输入机构",disabled:e.inputDisabled},model:{value:e.institution,callback:function(t){e.institution=t},expression:"institution"}})],1),t("el-descriptions-item",{attrs:{label:"邮箱"}},[t("el-input",{attrs:{placeholder:"请输入邮箱",disabled:e.inputDisabled},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],2)],1),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSelf&&!e.isInterested,expression:"!isSelf && !isInterested"}],staticClass:"el-button-interest",on:{click:e.interest}},[t("i",{staticClass:"el-icon-plus"},[e._v("关注")])]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSelf&&e.isInterested,expression:"!isSelf && isInterested"}],staticClass:"el-button-interested",on:{click:e.cancel_interest},nativeOn:{mouseover:function(t){return e.cancel_display.apply(null,arguments)},mouseleave:function(t){return e.cancel_hide.apply(null,arguments)}}},[e.isCancel?e._e():t("i",{staticClass:"el-icon-finished"},[e._v("已关注")]),e.isCancel?t("span",{staticClass:"el-icon-cancel"},[e._v("取消关注")]):e._e()]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSelf&&!e.isInterested,expression:"!isSelf && !isInterested"}],staticClass:"el-button-interest",on:{click:e.interest}},[t("i",{staticClass:"el-icon-plus"},[e._v("关注")])]),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isSelf&&e.isInterested,expression:"!isSelf && isInterested"}],staticClass:"el-button-interested",on:{click:e.cancel_interest},nativeOn:{mouseover:function(t){return e.cancel_display.apply(null,arguments)},mouseleave:function(t){return e.cancel_hide.apply(null,arguments)}}},[e.isCancel?e._e():t("i",{staticClass:"el-icon-finished"},[e._v("已关注")]),e.isCancel?t("span",{staticClass:"el-icon-cancel"},[e._v("取消关注")]):e._e()])],1)]),t("p",{staticStyle:{"font-size":"16px",color:"#8590a6"}},[e._v("机构："+e._s(e.institution))])])],1),t("div",{staticClass:"MidNav"},[t("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"1",mode:"horizontal","background-color":"#d7ecff","text-color":"#121212","active-text-color":"#2f3a91"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("我的成果")])],1)],1),t("div",{staticClass:"Bottom"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.MidNavIdx,expression:"MidNavIdx === '1'"}],staticClass:"BottomContent1"},[t("el-menu",{staticClass:"el-menu1-demo",attrs:{"default-active":"1",mode:"horizontal"},on:{select:e.handleSelect1}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("论文")]),t("el-menu-item",{attrs:{id:"item2",index:"2"}},[e._v("专利")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.Menu1Idx,expression:"Menu1Idx === '1'"}]},[t("el-input",{staticClass:"keywordSearch",attrs:{placeholder:"关键词检索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keywordsInput,callback:function(t){e.keywordsInput=t},expression:"keywordsInput"}},[t("el-button",{attrs:{slot:"suffix",icon:"el-icon-search"},on:{click:e.search},slot:"suffix"})],1),t("el-switch",{staticClass:"mp_switch",attrs:{"active-text":"仅看代表作","active-color":"#2f3a91","inactive-color":"#646464"},model:{value:e.isMasterpieceOnly,callback:function(t){e.isMasterpieceOnly=t},expression:"isMasterpieceOnly"}}),t("el-dropdown",{staticClass:"dropdown"},[t("el-button",[e._v(" 更多菜单"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("黄金糕")]),t("el-dropdown-item",[e._v("狮子头")]),t("el-dropdown-item",[e._v("螺蛳粉")]),t("el-dropdown-item",[e._v("双皮奶")]),t("el-dropdown-item",[e._v("蚵仔煎")])],1)],1),t("el-empty",{staticClass:"empty",attrs:{image:"https://p3-bcy-sign.bcyimg.com/banciyuan/98758c3b7b734765a1d72d8adce82a65~tplv-banciyuan-w650.image?x-expires=1704558020&x-signature=pKwEtXe1SEZI7S9mE2pfRusp%2BRU%3D",description:"空空如也~"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.Menu1Idx,expression:"Menu1Idx === '2'"}]},[t("el-input",{staticClass:"keywordSearch",attrs:{placeholder:"关键词检索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keywordsInput,callback:function(t){e.keywordsInput=t},expression:"keywordsInput"}},[t("el-button",{attrs:{slot:"suffix",icon:"el-icon-search"},on:{click:e.search},slot:"suffix"})],1),t("el-empty",{staticClass:"empty",attrs:{image:"https://p3-bcy-sign.bcyimg.com/banciyuan/98758c3b7b734765a1d72d8adce82a65~tplv-banciyuan-w650.image?x-expires=1704558020&x-signature=pKwEtXe1SEZI7S9mE2pfRusp%2BRU%3D",description:"空空如也~"}})],1)],1)])])])},a=[],n=(i(560),i(3429),i(8858),i(1318),i(3228),i(3680)),l=i(3822),o=i(8898),c={name:"PersonHomepage",computed:{index(){return l.ZP}},components:{NaviBar:n.Z},mounted(){this.token=localStorage.getItem("token"),null===this.token&&this.$router.push("/login"),(0,o.nq)(decodeURIComponent(atob(this.$route.params.id))).then((e=>{this.name=e.data._source.display_name,null===e.data._source.last_known_institution?this.institution="未知":this.institution=e.data._source.last_known_institution.display_name}))},data(){return{token:null,is_black:!1,username:"username",name:"name",institution:"institution",email:"email",imageUrl:"",MidNavIdx:"1",Menu1Idx:"1",Menu4Idx:"1",keywordsInput:"",isMasterpieceOnly:!1,isManager:!0,isSelf:!1,isInterested:!1,isCancel:!1,begin1:0,end1:10,begin2:0,end2:10,scholar_certification:[{id:"",author_id:"",username:"",send_user_id:"",datetime:""}],work_certification:[{id:"",work_id:"",send_user:"",send_user_id:"",author_id:"",datetime:""}],infoDialog:!1,infoDialogTitle:!0,dialogVisible:!1,inputDisabled:!0}},methods:{modify(){this.infoDialog=!0},modify_info(){this.infoDialogTitle=!1,this.inputDisabled=!1},modify_confirm(){this.infoDialogTitle=!0,this.inputDisabled=!0},modify_cancel(){this.infoDialogTitle=!0,this.inputDisabled=!0},modify_clear(){this.username="",this.name="",this.institution="",this.email=""},handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,i=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&i},handleSelect(e,t){console.log(e,t),this.MidNavIdx=e},handleSelect1(e,t){console.log(e,t),this.Menu1Idx=e},handleSelect4(e,t){console.log(e,t),this.Menu4Idx=e},search(){alert(this.keywordsInput)},interest(){this.isInterested=!0},cancel_display(){this.isCancel=!0},cancel_hide(){this.isCancel=!1},cancel_interest(){this.isInterested=!1},accept(e){console.log(e);const t=new FormData;t.append("result","1"),t.append("message_id",this.scholar_certification[e].id),(0,o.Bx)(t,this.token).then((t=>{0===t.data.result?(this.$notify({title:"成功",message:"已同意",type:"success"}),this.scholar_certification.splice(e,1)):this.$notify({title:"警告",message:"操作失败",type:"warning"})}))},refuse(e){console.log(e);const t=new FormData;t.append("result","0"),t.append("message_id",this.scholar_certification[e].id),(0,o.Bx)(t,this.token).then((t=>{0===t.data.result?(this.$notify({title:"成功",message:"已拒绝",type:"success"}),this.scholar_certification.splice(e,1)):this.$notify({title:"警告",message:"操作失败",type:"warning"})}))},accept2(e){console.log(e);const t=new FormData;t.append("result","1"),t.append("message_id",this.work_certification[e].id),(0,o.KZ)(t,this.token).then((t=>{0===t.data.result?(this.$notify({title:"成功",message:"已同意",type:"success"}),this.work_certification.splice(e,1)):this.$notify({title:"警告",message:"操作失败",type:"warning"})}))},refuse2(e){console.log(e);const t=new FormData;t.append("result","0"),t.append("message_id",this.work_certification[e].id),(0,o.KZ)(t,this.token).then((t=>{0===t.data.result?(this.$notify({title:"成功",message:"已拒绝",type:"success"}),this.work_certification.splice(e,1)):this.$notify({title:"警告",message:"操作失败",type:"warning"})}))},prev(){this.begin1>=10?(this.begin1-=10,this.end1-=10):(this.begin1=0,this.end1=10)},next(){this.begin1+=10,this.end1+=10},pageChange(e){console.log(e),this.begin1=10*(e-1),this.end1=10*e},prev2(){this.begin2>=10?(this.begin2-=10,this.end2-=10):(this.begin2=0,this.end2=10)},next2(){this.begin2+=10,this.end2+=10},pageChange2(e){console.log(e),this.begin2=10*(e-1),this.end2=10*e},uploadPic(e){const t=new FormData;t.append("avatar",e.file),console.log(e.file),(0,o.ab)(t,this.token).then((e=>{0===e.data.result?(this.$notify({title:"成功",message:"上传成功",type:"success"}),this.$router.go(0)):this.$notify({title:"警告",message:"上传失败",type:"warning"})}))}}},r=c,d=i(1001),u=(0,d.Z)(r,s,a,!1,null,"3bb1f3a2",null),p=u.exports}}]);
//# sourceMappingURL=284.27f1177a.js.map