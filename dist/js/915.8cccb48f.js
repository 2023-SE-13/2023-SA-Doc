"use strict";(self["webpackChunkscholarhub"]=self["webpackChunkscholarhub"]||[]).push([[915],{5915:function(t,i,e){e.r(i),e.d(i,{default:function(){return d}});var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"container"},[i("div",{staticClass:"left-bar"},[i("el-divider"),t._m(0),i("el-divider")],1),i("div",{staticClass:"body-setting"},[i("div",{staticClass:"cell certification"},[i("el-divider"),t._m(1),i("el-divider")],1),i("div",{staticClass:"cell content"},[i("div",{staticClass:"cell"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold","margin-left":"3%"}},[t._v("实名认证")]),i("span",{staticStyle:{"padding-left":"10%","margin-right":"60%",color:"darkgrey"}},[t._v(" "+t._s(t.isAuthentication?t.realName:"未实名")+" ")]),t.isAuthentication?t._e():i("el-button",{staticClass:"binding-btn",attrs:{type:"primary",round:""},on:{click:t.gotoBinding}},[t._v("认证")])],1),i("el-divider")],1),i("div",{staticClass:"cell"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold","margin-left":"3%"}},[t._v("管理员认证")]),i("span",{staticStyle:{"padding-left":"8.5%","margin-right":"38%",color:"darkgrey"}},[t._v(" "+t._s(t.isAdmin?"已认证":"")+" ")]),t.isAdmin?t._e():i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"","show-password":""},model:{value:t.AdminCode,callback:function(i){t.AdminCode=i},expression:"AdminCode"}}),t.isAdmin?t._e():i("el-button",{staticClass:"admin-btn",attrs:{type:"primary",round:""},on:{click:function(i){return t.applyAdmin()}}},[t._v("认证")])],1),i("div",{staticClass:"cell account-settings"},[i("el-divider"),t._m(2),i("el-divider")],1),i("div",{staticClass:"cell"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold","margin-left":"3%"}},[t._v("绑定邮箱")]),i("span",{staticStyle:{"margin-left":"10%","margin-right":"60%",color:"darkgrey"}},[t._v(" "+t._s(t.email)+" ")]),i("el-button",{staticClass:"edit-email-btn",attrs:{type:"danger",round:""},on:{click:function(i){t.EditEmail=!0}}},[t._v("换绑")])],1),i("el-divider"),i("el-dialog",{attrs:{title:"换绑邮箱",visible:t.EditEmail,width:"500px","before-close":t.handleClose},on:{"update:visible":function(i){t.EditEmail=i}}},[i("span",[t._v("邮箱验证通过后，更换账号绑定的邮箱")]),i("el-form",{ref:"regForm",attrs:{model:t.emailForm,rules:t.emailFormRules}},[i("el-form-item",{attrs:{label:"新绑定邮箱",prop:"email"}},[i("el-input",{model:{value:t.emailForm.email,callback:function(i){t.$set(t.emailForm,"email",i)},expression:"emailForm.email"}})],1),i("el-form-item",[i("el-button",{staticClass:"sendCode-btn",attrs:{disabled:t.verificationSent},on:{click:t.sendVerificationCode}},[t._v(" "+t._s(t.verificationSent?"已发送":"发送验证码")+" ")])],1),i("el-form-item",{attrs:{label:"验证码",prop:"code"}},[i("div",{staticClass:"verification-code"},t._l(4,(function(e){return i("el-input",{key:e,ref:"verificationInputs",refInFor:!0,staticStyle:{width:"40px","margin-right":"5px","text-align":"center"},attrs:{maxlength:1},on:{input:function(i){return t.handleVerificationInput(e)}},model:{value:t.verificationCode[e-1],callback:function(i){t.$set(t.verificationCode,e-1,i)},expression:"verificationCode[index - 1]"}})})),1)])],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"danger"},on:{click:function(i){t.EditEmail=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.changeEmail}},[t._v("确 定")])],1)],1)],1),t._m(3)])},s=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"title-s"},[i("span",{staticStyle:{"margin-right":"2%"}},[t._v("账号信息")]),i("i",{staticClass:"el-icon-user-solid"})])},function(){var t=this,i=t._self._c;return i("div",{staticClass:"cell"},[i("span",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-left":"3%"}},[i("i",{staticClass:"el-icon-info",staticStyle:{"margin-right":"4px"}}),t._v("实名认证")]),i("span",{staticStyle:{color:"darkgrey","margin-left":"8%"}},[t._v("平台部分功能使用需要先完成实名认证")])])},function(){var t=this,i=t._self._c;return i("div",{staticClass:"cell"},[i("span",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-left":"3%"}},[i("i",{staticClass:"el-icon-s-tools",staticStyle:{"margin-right":"4px"}}),t._v("账号设置")])])},function(){var t=this,i=t._self._c;return i("div",{staticClass:"right-bar"},[i("div",{staticClass:"placeholder"},[i("div",{staticClass:"icon-stt"},[i("i",{staticClass:"el-icon-setting",staticStyle:{color:"#f3f5f8"}}),i("i",{staticClass:"el-icon-setting",staticStyle:{"margin-left":"-100px","font-size":"150px","margin-right":"50px"}})])])])}],l=(e(560),e(8898)),n={mounted(){this.token=localStorage.getItem("token"),(0,l.H9)(this.token).then((t=>{0===t.data.result?(this.isAuthentication=t.data.is_authentication,this.realName=t.data.true_name,this.email=t.data.email,this.isAdmin=t.data.is_admin):this.$notify({title:"警告",message:"获取用户信息失败",type:"warning"})})),null===this.token&&this.$router.push("/login")},data(){return{isAdmin:!1,isAuthentication:!1,email:"",realName:"",verificationSent:!1,verificationCode:["","","",""],AdminCode:"",EditEmail:!1,emailForm:{email:"",code:["","","",""]},emailFormRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],code:[{required:!0,message:" ",trigger:"blur"}]},Email:{email:""}}},methods:{gotoBinding(){this.$router.push("/authentication")},handleClose(t){this.$confirm("确认关闭？").then((i=>{t()})).catch((t=>{}))},handleVerificationInput(t){const i=this.verificationCode[t-1];1===i.length&&t<4?this.$refs.verificationInputs[t].focus():0===i.length&&t>1&&this.$refs.verificationInputs[t-2].focus()},sendVerificationCode(){let t=new FormData;if("undefined"==typeof this.emailForm.email||null==this.emailForm.email||""===this.emailForm.email)return void this.$notify({title:"警告",message:"邮箱不能为空",type:"warning"});let i=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;i.test(this.emailForm.email)?(t.append("email",this.emailForm.email),(0,l.ZY)(t),this.verificationSent=!0):this.$notify({title:"警告",message:"邮箱格式不正确",type:"warning"})},async changeEmail(){this.Email.email=this.emailForm.email,(0,l.K_)(this.Email,localStorage.getItem("token")).then((t=>{console.log(t),this.$message({type:"success",message:"邮箱修改成功！"}),this.EditEmail=!1}))},async applyAdmin(){const t=new FormData;t.append("code",this.AdminCode),(0,l.c6)(t,localStorage.getItem("token")).then((t=>{console.log(t)}))}}},o=n,r=e(1001),c=(0,r.Z)(o,a,s,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=915.8cccb48f.js.map